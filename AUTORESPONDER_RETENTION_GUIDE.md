# AutoResponder + Retention Service - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 30 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-ready

---

## üìã –û–±–∑–æ—Ä

–î–≤–∞ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX –∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **AutoResponder** - –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ
2. **Retention Service** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Goodbye Screen

---

## ü§ñ AutoResponder Service

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –ª—é–±—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏.

### –õ–æ–≥–∏–∫–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Ç–µ–∫—Å—Ç
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω—Ç–∏—Å–ø–∞–º–∞ (1 –æ—Ç–≤–µ—Ç –≤ 10 —Å–µ–∫)
    ‚Üì
–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (–Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã)
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤:
    ‚Ä¢ "—Å–∏–≥–Ω–∞–ª/signals" ‚Üí –æ—Ç–≤–µ—Ç –æ —Å–∏–≥–Ω–∞–ª–∞—Ö
    ‚Ä¢ "–∫–∞–∑–∏–Ω–æ/casino" ‚Üí –æ—Ç–≤–µ—Ç –æ –∫–∞–∑–∏–Ω–æ
    ‚Ä¢ "–≤–∏–ø/vip" ‚Üí –æ—Ç–≤–µ—Ç –æ VIP
    ‚Ä¢ "–ø–æ–º–æ—â—å/help" ‚Üí —Å–ø—Ä–∞–≤–∫–∞
    ‚Ä¢ –∏–Ω–∞—á–µ ‚Üí fallback
    ‚Üì
–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
```

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞

**–†—É—Å—Å–∫–∏–π:**
- –°–∏–≥–Ω–∞–ª—ã: "—Å–∏–≥–Ω–∞–ª", "—Å–∏–≥–Ω–∞–ª—ã", "–∫–∞–∫–æ–π —Å–∏–≥–Ω–∞–ª", "–∫–æ–≥–¥–∞ —Å–∏–≥–Ω–∞–ª"
- –ö–∞–∑–∏–Ω–æ: "–∫–∞–∑–∏–Ω–æ", "–∏–≥—Ä–∞—Ç—å", "–∏–≥—Ä–∞", "—Å—Ç–∞–≤–∫–∞", "–¥–µ–ø–æ–∑–∏—Ç", "–≤—ã–≤–æ–¥"
- VIP: "–≤–∏–ø", "vip", "–ø—Ä–µ–º–∏—É–º", "premium", "–ø–æ–¥–ø–∏—Å–∫–∞", "—á–ª–µ–Ω—Å—Ç–≤–æ"
- –ü–æ–º–æ—â—å: "–ø–æ–º–æ—â—å", "–∫–∞–∫", "—á—Ç–æ", "–ø–æ–º–æ–≥–∏", "–æ–±—ä—è—Å–Ω–∏", "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"

**English:**
- Signals: "signal", "signals", "when signal", "what signal", "get signal"
- Casino: "casino", "play", "game", "bet", "deposit", "withdraw"
- VIP: "vip", "premium", "subscription", "membership"
- Help: "help", "how", "what", "explain", "instruction", "guide"

### API

```python
# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
response = await autoresponder_service.handle_text(
    user_id=123456,
    user=user_obj,
    message_text="–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã?"
)

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
autoresponder_service.clear_cache()
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|---------|
| MIN_RESPONSE_INTERVAL | 10 —Å–µ–∫ | –ú–∏–Ω–∏–º—É–º –º–µ–∂–¥—É –æ—Ç–≤–µ—Ç–∞–º–∏ |

### –ü—Ä–∏–º–µ—Ä—ã

**–í—Ö–æ–¥:** "–°–∏–≥–Ω–∞–ª—ã?"  
**–í—ã—Ö–æ–¥:** "üìä –Ø –æ—Ç–ø—Ä–∞–≤–ª—è—é —Ç–æ—á–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–∞ –∏–≥—Ä—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å..."

**–í—Ö–æ–¥:** "–ö–∞–∫ –∏–≥—Ä–∞—Ç—å?"  
**–í—ã—Ö–æ–¥:** "‚ùì –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç: 1Ô∏è‚É£ –ü–æ–¥–ø–∏—Å–∫–∞..."

**–í—Ö–æ–¥:** "–ü—Ä–∏–≤–µ—Ç"  
**–í—ã—Ö–æ–¥:** "üòä –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ üëá –í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –º–µ–Ω—é..."

---

## üëã Retention Service

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ —Å–∏–≥–Ω–∞–ª–∞–º, VIP –∏ –∫–∞–∑–∏–Ω–æ.  
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Goodbye Screen" –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø–∏—Å–∞–ª—Å—è.

### –õ–æ–≥–∏–∫–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç /signals (–∏–ª–∏ VIP/–∫–∞–∑–∏–Ω–æ)
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ Telegram API
    ‚Üì
–ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω:
    ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø
    
–ï—Å–ª–∏ –ù–ï –ø–æ–¥–ø–∏—Å–∞–Ω:
    ‚ùå –ü–æ–∫–∞–∑–∞—Ç—å Goodbye Screen
    üì¨ –°–æ–æ–±—â–µ–Ω–∏–µ: "üò¢ –¢—ã –≤—ã—à–µ–ª –∏–∑ –∫–∞–Ω–∞–ª–∞"
    üîò –ö–Ω–æ–ø–∫–∏: [–ü–æ–¥–ø–∏—Å–∞–ª—Å—è] [–û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª]
    
–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è [–ü–æ–¥–ø–∏—Å–∞–ª—Å—è]:
    ‚Üì
    –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
    ‚Üì
    –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø—É—Å—Ç–∏—Ç—å –¥–∞–ª—å—à–µ
    –ï—Å–ª–∏ –ù–ï –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
```

### Goodbye Screen

**–†—É—Å—Å–∫–∏–π:**
```
üò¢ –¢—ã –≤—ã—à–µ–ª –∏–∑ –∫–∞–Ω–∞–ª–∞

–°–∏–≥–Ω–∞–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º –∫–∞–Ω–∞–ª–∞.

–í–µ—Ä–Ω–∏—Å—å –≤ –∫–∞–Ω–∞–ª –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π –∏–≥—Ä–∞—Ç—å! üé∞

[‚úÖ –Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è]  [üì¢ –û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª]
```

**English:**
```
üò¢ You left the channel

Signals are only available to channel subscribers.

Come back to the channel and keep playing! üé∞

[‚úÖ I subscribed]  [üì¢ Open channel]
```

### API

```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ —Å–∏–≥–Ω–∞–ª–∞–º–∏
is_allowed, error_msg = await retention_service.check_before_signals(
    user_id=123456,
    user=user_obj
)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ VIP
is_allowed, error_msg = await retention_service.check_before_vip(
    user_id=123456,
    user=user_obj
)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –∫–∞–∑–∏–Ω–æ
is_allowed, error_msg = await retention_service.check_before_casino(
    user_id=123456,
    user=user_obj
)

# –ü–æ–∫–∞–∑–∞—Ç—å Goodbye Screen
await retention_service.show_goodbye_screen(
    user_id=123456,
    user=user_obj,
    action="signals"
)

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ [–ü–æ–¥–ø–∏—Å–∞–ª—Å—è]
is_subscribed = await retention_service.handle_subscription_check(
    user_id=123456,
    user=user_obj
)

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ [–û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª]
await retention_service.handle_open_channel(
    user_id=123456,
    user=user_obj
)
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –ë–î:

| –°–æ–±—ã—Ç–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|
| user_unsubscribed | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø–∏—Å–∞–ª—Å—è |
| user_resubscribed | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∞–ª—Å—è |
| goodbye_screen_shown | Goodbye Screen –ø–æ–∫–∞–∑–∞–Ω |
| retention_check_success | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ —É—Å–ø–µ—à–Ω–∞ |
| retention_check_failed | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞ |
| retention_open_channel_clicked | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª –∫–∞–Ω–∞–ª |

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 1. –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (AutoResponder)

**–§–∞–π–ª:** `app/handlers/text_handler.py`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ AutoResponder.

```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã?"
# ‚Üí AutoResponder –æ—Ç–≤–µ—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### 2. –ö–æ–º–∞–Ω–¥–∞ /signals (Retention)

**–§–∞–π–ª:** `app/handlers/signals.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)

```python
# –ü–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞
is_allowed, error_msg = await retention_service.check_before_signals(user_id, user)
if not is_allowed:
    await retention_service.show_goodbye_screen(user_id, user, "signals")
    return
```

### 3. Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏

**–§–∞–π–ª:** `app/handlers/text_handler.py`

- `retention_check_subscription` - –∫–Ω–æ–ø–∫–∞ [–ü–æ–¥–ø–∏—Å–∞–ª—Å—è]
- `retention_open_channel` - –∫–Ω–æ–ø–∫–∞ [–û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª]

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ main.py

```python
# –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã
autoresponder_service = AutoResponderService(bot)
retention_service = RetentionService(bot)

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
dispatcher.workflow_data["autoresponder_service"] = autoresponder_service
dispatcher.workflow_data["retention_service"] = retention_service

# –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–æ—É—Ç–µ—Ä
dp.include_router(text_handler.router)
```

---

## üìä –ö–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-------|---------|
| AutoResponder | 287 | –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å |
| Retention | 330 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ |
| text_handler | 105 | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞ |
| signals.py (–æ–±–Ω–æ–≤–ª–µ–Ω) | +10 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| main.py (–æ–±–Ω–æ–≤–ª–µ–Ω) | +8 | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è |
| **–í—Å–µ–≥–æ** | **740** | Production-ready |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç AutoResponder

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python main.py

# 2. –ù–∞–ø–∏—Å–∞—Ç—å –≤ –±–æ—Ç:
"–°–∏–≥–Ω–∞–ª—ã?"
# –û–∂–∏–¥–∞–µ–º–æ: –æ—Ç–≤–µ—Ç –æ —Å–∏–≥–Ω–∞–ª–∞—Ö

"–ö–∞–∫ –∏–≥—Ä–∞—Ç—å?"
# –û–∂–∏–¥–∞–µ–º–æ: —Å–ø—Ä–∞–≤–∫–∞

"–ü—Ä–∏–≤–µ—Ç"
# –û–∂–∏–¥–∞–µ–º–æ: fallback –æ—Ç–≤–µ—Ç

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–Ω—Ç–∏—Å–ø–∞–º (10 —Å–µ–∫)
# –ë—ã—Å—Ç—Ä–æ –Ω–∞–ø–∏—Å–∞—Ç—å 2 —Å–æ–æ–±—â–µ–Ω–∏—è
# –û–∂–∏–¥–∞–µ–º–æ: –≤—Ç–æ—Ä–æ–µ –Ω–µ –ø–æ–ª—É—á–∏—Ç –æ—Ç–≤–µ—Ç
```

### –¢–µ—Å—Ç Retention

```bash
# 1. –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –∫–∞–Ω–∞–ª–∞

# 2. –ù–∞–ø–∏—Å–∞—Ç—å /signals
# –û–∂–∏–¥–∞–µ–º–æ: Goodbye Screen

# 3. –ù–∞–∂–∞—Ç—å [–û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª]
# –û–∂–∏–¥–∞–µ–º–æ: —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª

# 4. –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª

# 5. –ù–∞–∂–∞—Ç—å [–Ø –ø–æ–¥–ø–∏—Å–∞–ª—Å—è]
# –û–∂–∏–¥–∞–µ–º–æ: "‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É!"

# 6. –ù–∞–ø–∏—Å–∞—Ç—å /signals
# –û–∂–∏–¥–∞–µ–º–æ: —Å–∏–≥–Ω–∞–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã
```

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AutoResponder –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
response = await autoresponder_service.handle_text(user_id, user, text)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Retention –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
is_allowed, _ = await retention_service.check_before_signals(user_id, user)
```

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. **AutoResponder:**
   - –ü–∏—à—É—Ç –≤–æ–ø—Ä–æ—Å—ã –≤ –±–æ—Ç
   - –ü–æ–ª—É—á–∞—é—Ç –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
   - –ù–µ –Ω—É–∂–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫–∏

2. **Retention:**
   - –ï—Å–ª–∏ –æ—Ç–ø–∏—Å–∞–ª–∏—Å—å - –≤–∏–¥—è—Ç Goodbye Screen
   - –õ–µ–≥–∫–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ
   - –ù–µ —Ç–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### AutoResponder

```python
# app/services/autoresponder_service.py

# –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –æ—Ç–≤–µ—Ç–∞–º–∏
MIN_RESPONSE_INTERVAL = 10  # —Å–µ–∫

# –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
KEYWORDS_SIGNALS = {
    "ru": ["—Å–∏–≥–Ω–∞–ª", "—Å–∏–≥–Ω–∞–ª—ã", ...],
    "en": ["signal", "signals", ...]
}
```

### Retention

```python
# app/services/retention_service.py

# –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç Goodbye Screen
def _get_goodbye_message(self, language: str) -> str:
    if language == "ru":
        return "üò¢ –¢—ã –≤—ã—à–µ–ª –∏–∑ –∫–∞–Ω–∞–ª–∞..."
```

---

## üìû Troubleshooting

### AutoResponder –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ text_handler.router –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ main.py
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f logs/bot.log`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –∫–æ–º–∞–Ω–¥–∞ (–Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å /)

### Retention –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Goodbye Screen

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—Ç–ø–∏—Å–∫–µ Goodbye Screen –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ retention_service –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ check_before_signals –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ signals handler
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–ª—è –æ—à–∏–±–æ–∫

### –ö—ç—à AutoResponder –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–Ω—Ç–∏—Å–ø–∞–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –≤—Ä—É—á–Ω—É—é
autoresponder_service.clear_cache()

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª
MIN_RESPONSE_INTERVAL = 5  # –≤–º–µ—Å—Ç–æ 10
```

---

## üöÄ Production Checklist

- ‚úÖ AutoResponder Service —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Retention Service —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ text_handler.py –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ signals.py –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ main.py –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ë–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- ‚úÖ Production-ready

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**
